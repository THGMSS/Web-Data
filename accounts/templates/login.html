{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Login Web Data</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/login.css' %}?v=1">
</head>
<body class="login-page">
    <div class="login-wrapper">
        <section class="login-panel">
            <div class="login-panel-inner">
                <div class="login-brand text-center mb-4">
                    <span class="text-center">Acessse o site Web Data</span>
                </div>

                {% if form.errors %}
                <div class="alert alert-danger" role="alert">
                    Usuário ou senha inválidos. Tente novamente.
                </div>
                {% endif %}

                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-{{ message.tags|default:'info' }}" role="alert">
                    {{ message }}
                </div>
                {% endfor %}
                {% endif %}

                <form method="post" novalidate class="login-form">
                    {% csrf_token %}
                    {% if next %}
                        <input type="hidden" name="next" value="{{ next }}">
                    {% endif %}
                    <div class="floating-field mb-4">
                        <input
                            type="text"
                            name="{{ form.username.name }}"
                            id="{{ form.username.id_for_label }}"
                            value="{{ form.username.value|default_if_none:'' }}"
                            class="floating-input{% if form.username.errors %} is-invalid{% endif %}"
                            autocomplete="username"
                            required
                            placeholder=" "
                        >
                        <label for="{{ form.username.id_for_label }}">Usuário</label>
                        {% if form.username.errors %}
                            <div class="field-error">{{ form.username.errors|striptags }}</div>
                        {% endif %}
                    </div>
                    <div class="floating-field mb-4">
                        <input
                            type="password"
                            name="{{ form.password.name }}"
                            id="{{ form.password.id_for_label }}"
                            class="floating-input{% if form.password.errors %} is-invalid{% endif %}"
                            autocomplete="current-password"
                            required
                            placeholder=" "
                        >
                        <label for="{{ form.password.id_for_label }}">Senha</label>
                        {% if form.password.errors %}
                            <div class="field-error">{{ form.password.errors|striptags }}</div>
                        {% endif %}
                    </div>
                    <div class="d-grid gap-2">
                        <button class="btn btn-primary w-100" type="submit" name="access_mode" value="user">Entrar</button>
                        <button type="submit" name="access_mode" value="admin" class="btn btn-outline-secondary">Sou ADM</button>
                    </div>
                </form>
            </div>
        </section>
        <aside class="login-visual" aria-hidden="true">
            <div class="visual-overlay">
                <div class="visual-badge">Experiência RNV</div>
                <h2 class="visual-title">Conecte-se<br>com segurança</h2>
                <p class="visual-text" id="loginSlideMessage" role="status" aria-live="polite">
                    Centralize os lançamentos contábeis e mantenha o compliance em dia.
                </p>
            </div>
            <div class="visual-slides">
                <div class="visual-slide slide-1"></div>
                <div class="visual-slide slide-2"></div>
                <div class="visual-slide slide-3"></div>
            </div>
        </aside>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const messageElement = document.getElementById('loginSlideMessage');
            if (!messageElement) {
                return;
            }

            const accountingMessages = [
                'Centralize os lançamentos contábeis e mantenha o compliance em dia.',
                'Antecipe divergências fiscais com dashboards e relatórios inteligentes.',
                'Simplifique conciliações e garanta entregas contábeis sem surpresas.'
            ];

            let messageIndex = 1;
            const switchDuration = 7000;

            const cycleMessage = () => {
                messageElement.classList.add('is-fading');

                window.setTimeout(() => {
                    messageElement.textContent = accountingMessages[messageIndex];
                    messageElement.classList.remove('is-fading');
                    messageIndex = (messageIndex + 1) % accountingMessages.length;
                }, 400);
            };

            window.setInterval(cycleMessage, switchDuration);
        });
    </script>
</body>
</html>

